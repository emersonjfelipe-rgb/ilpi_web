{% extends "core/base.html" %}
{% block title %}Pacientes - ILPI{% endblock %}

{% block content %}
<div class="page-title">
  <h1>Pacientes</h1>
  <a class="btn btn-primary" href="/pacientes/novo/">Novo paciente</a>
</div>

<div class="card" style="margin-bottom:12px;">
  <form method="get" class="grid" style="align-items:end;">
    <div class="col-6">
      <label>Pesquisar</label>
      <input class="input" name="q" placeholder="Buscar por nome ou CPF" value="{{ q }}">
    </div>
    <div class="col-3">
      <button class="btn btn-primary" type="submit">Buscar</button>
      <a class="btn btn-ghost" href="/pacientes/">Limpar</a>
    </div>
  </form>
</div>

<table class="table">
  <tr>
    <th>ID</th><th>Nome</th><th>Sexo</th><th>Grau</th><th>CPF</th><th>Ações</th>
  </tr>
  {% for p in pacientes %}
  <tr>
    <td>{{ p.id }}</td>
    <td>{{ p.nome }}</td>
    <td>{{ p.sexo|default:"" }}</td>
    <td>
      {% if p.grau_dependencia == 1 %}
        <span class="badge badge-ok">1</span>
      {% elif p.grau_dependencia == 2 %}
        <span class="badge badge-warn">2</span>
      {% else %}
        <span class="badge badge-danger">3</span>
      {% endif %}
    </td>
    <td>{{ p.cpf|default:"" }}</td>
    <td>
      <a class="btn btn-ghost" href="/pacientes/{{ p.id }}/editar/">Editar</a>
      <a class="btn btn-danger" href="/pacientes/{{ p.id }}/excluir/">Excluir</a>
    </td>
  </tr>
  {% empty %}
  <tr><td colspan="6">Nenhum paciente encontrado.</td></tr>
  {% endfor %}
</table>
{% endblock %}
